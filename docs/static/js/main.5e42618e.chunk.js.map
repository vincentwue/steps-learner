{"version":3,"sources":["App.module.css","Controller.ts","App.tsx","index.tsx"],"names":["module","exports","keys","numbers","RandomController","_key","_number","_ignore","_onChange","Subject","this","nextNumber","nextKey","setInterval","next","number","key","ignore","n","randomFromArray","filter","includes","publish","k","undefined","i","arr","Math","floor","random","length","App","useState","state","setState","controller","useEffect","onChange","subscribe","console","log","map","s","className","classes","ignored","included","ignoreButton","onClick","e","item","box","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5e42618e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"App_box__22HXT\",\"ignore\":\"App_ignore__2SyIL\",\"ignoreButton\":\"App_ignoreButton__3bHMF\",\"included\":\"App_included__3gq1F\",\"number\":\"App_number__1CyVF\",\"key\":\"App_key__gfJ0-\"};","import { Subject } from \"rxjs\"\r\n\r\n\r\nexport const keys = [\r\n    \"B Dur \",\r\n    \"G# Moll\",\r\n\r\n    \"A Dur \",\r\n    \"F# moll \",\r\n\r\n    \"F Dur\",\r\n    \"D Moll\",\r\n\r\n    \"C Dur\",\r\n    \"A Moll\",\r\n\r\n    \"G Dur\",\r\n    \"E Moll\",\r\n\r\n    \"Gb Dur\",\r\n    \"Eb Moll\",\r\n\r\n    \"Bb Dur\",\r\n    \"G Moll\",\r\n\r\n    \"Eb Dur\",\r\n    \"C Moll\",\r\n\r\n    \"Ab Dur\",\r\n    \"F Moll\",\r\n\r\n    \"F Dur\",\r\n    \"Db Moll\",\r\n\r\n    \"Db Dur\",\r\n    \"Bb Moll\",\r\n]\r\n\r\nexport const numbers = [\r\n    \"1\",\r\n    \"2\",\r\n    \"3\",\r\n    \"4\",\r\n    \"5\",\r\n    \"6\",\r\n    \"7\",\r\n]\r\n\r\nexport interface IState {\r\n    number: string\r\n    key: string\r\n    ignore: string[]\r\n}\r\n\r\nexport default class RandomController {\r\n\r\n    private _key = keys[1]\r\n    private _number = numbers[1]\r\n    private _ignore: string[] = []\r\n\r\n    private _onChange = new Subject<IState>()\r\n\r\n    constructor() {\r\n        this.nextNumber()\r\n        this.nextKey()\r\n        setInterval(() => {\r\n            this.nextKey()\r\n        }, 10000)\r\n        setInterval(() => {\r\n            this.nextNumber()\r\n        }, 2000)\r\n    }\r\n\r\n\r\n\r\n    private publish() {\r\n        this._onChange.next({\r\n            number: this._number,\r\n            key: this._key,\r\n            ignore: this._ignore\r\n        })\r\n    }\r\n\r\n    public nextNumber() {\r\n        const n = randomFromArray(numbers.filter(n => n !== this._number).filter(n => !this._ignore.includes(n)))\r\n        if (!n) {\r\n            this.nextNumber()\r\n            return\r\n        }\r\n        this._number = n\r\n        this.publish()\r\n    }\r\n\r\n    public nextKey() {\r\n        let k = undefined\r\n        let i = 0\r\n        while (!k && i<100) {\r\n            k = randomFromArray(keys.filter(n => n !== this._key).filter(n => !this._ignore.includes(n)))\r\n            i++\r\n        }\r\n        if (k) {\r\n            this._key = k\r\n            this.publish()\r\n        }\r\n\r\n    }\r\n\r\n    public get ignore() {\r\n        return this._ignore\r\n    }\r\n\r\n    public set ignore(arr: string[]) {\r\n        this._ignore = arr\r\n        this.publish()\r\n    }\r\n\r\n\r\n    public get onChange() {\r\n        return this._onChange\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction randomFromArray(arr: string[]) {\r\n    return arr[Math.floor((Math.random() * arr.length))];\r\n}","import React, { useEffect, useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport RandomController, { IState, keys, numbers } from './Controller';\nimport { classicNameResolver } from 'typescript';\n\nimport classes from \"./App.module.css\"\n\nfunction App() {\n\n  const [state, setState] = useState<IState>()\n\n  const [controller] = useState(new RandomController())\n\n  useEffect(() => {\n    controller.onChange.subscribe(state => {\n      setState(state)\n    })\n  }, [])\n\n  console.log(state)\n\n  const ignore = [...keys, /* ...numbers */].map(s => <button\n    className={(state?.ignore.includes(s) ? classes.ignored : classes.included) + \" \" + classes.ignoreButton}\n    onClick={e => {\n      if (state) {\n\n        if (!state.ignore.includes(s)) {\n          controller.ignore = [...state.ignore, s]\n        } else {\n          controller.ignore = state.ignore.filter(item => item !== s)\n        }\n\n      }\n    }}>{s}</button>)\n\n  return (\n    <div className=\"App\">\n      <div><button onClick={e => controller.nextKey()}>next key</button></div>\n\n\n      <div className={classes.box}>\n        <div className={classes.key}>{state?.key}</div>\n        <div className={classes.number}>{state?.number}</div>\n      </div>\n\n      <div><button onClick={e => {\n        if (state?.ignore.length === 0) {\n          controller.ignore = keys\n        } else {\n          controller.ignore = []\n        }\n      }}>all</button></div>\n      <div className={classes.ignore}>{ignore}</div>\n\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}